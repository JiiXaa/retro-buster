{% extends "base.html" %}
{% block content %}

<h1>Show all VHS in the database</h1>

<h3>Quick search:</h3>
<form action="{{ url_for('videocassettes.vhs_search') }}" method="post">
  <label for="title">Title</label>
  <input type="text" name="title" id="title"> <br>
  <label for="director">Director</label>
  <input type="text" name="director" id="director"> <br>
  <label for="genre">Genre</label>
  <input type="text" name="genre" id="genre"> <br>
  <input type="submit" value="Search">
</form>

<table>
  <tr>
    <th>Id</th>
    <th>Title</th>
    <th>Director</th>
    <th>Genre</th>
    <th>In Stock</th>
    <th>Actions</th>
    <th>Details</th>
  </tr>
  {% for vhs in vhs_all %}
  <tr>
    <td>{{ vhs.id }}</td>
    <td>{{ vhs.title }}</td>
    <td>{{ vhs.director }}</td>
    <td>{{ vhs.genre }}</td>
    <td>{{ vhs.total_copies }}</td>
    <td>
      <a href="{{ url_for('videocassettes.vhs_edit', id=vhs.id) }}" id="{{ vhs.id }}">Edit</a>
      <a href="{{ url_for('videocassettes.vhs_delete', id=vhs.id) }}" id="{{ vhs.id }}">Delete</a>
    </td>
    <td>    <p>{{ vhs.vhs_details|length }} copies of this VHS are in the database.</p>
      {% for vhs_detail in vhs.vhs_details %}
      <p>{{ vhs_detail.copy_number }} - {% if vhs_detail.is_available %}
          This VHS copy is available.
      {% endif %}</p>
      {% endfor %}</td>
  </tr>
  {% endfor %}
</table>

{% endblock %}